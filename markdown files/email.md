# Верстка email писем

## Теория

Для верстки писем используется табличная верстка. Используем только Inline-стили, то есть применять непосредственно к тегам. Писать CSS в тегах head и body запрещено, так как некоторые клиенты будут удалять все, что находится в этих тегах. 

Если вы верстаете для всех устройств, включая мобильные телефоны и планшеты, то ширина письма не должна превышать 600px. Если использовать ширину больше этого значения, то письмо по ширине не поместится в почтовый клиент. 

## Практика

## Полезные методы

## Теги, атрибуты и стили

### Теги
* `<table></table>` - задает начало и конец таблицы
* `<tbody></tbody>` - предназначен для хранения одной или нескольких строк таблицы и позволяет создавать структурные блоки, к которым можно применять единые правила оформления
* `<tr></tr>` -  строка таблицы
* `<td></td>` -  столбец таблицы

### Атрибуты у `<table>`

* `border` - устанавливает толщину рамки в `px`, по-умолчанию значение `0`, но email-клиенты добавляют ему свое значение по-умолчанию

* `cellpadding` - определяет расстояние между границей ячейки и ее содержимым, по-умолчанию значение `0`, но email-клиенты добавляют ему свое значение по-умолчанию

* `cellspacing` - задает расстояние между внешними границами ячеек, по-умолчанию имеет значение `0` (если не установлен атрибут `border`) или значение `2`, если задан атрибут `border`. Если установлен атрибут `border`, толщина границы принимается в расчет

* `width` - ширина границы, можно задавать значение в `px` или `%`, рекомендуется указывать всегда

* `height` - высота границы, можно задавать значение в `px` или `%`, не рекомендуется использовать для `<table>` (возникают проблемы с выравниванием ячеек по вертикали внутри главной таблицы), лучше задавать `height: 100%;` тегу `<td>`

* `align` - задает выравнивание таблицы по краю окна браузера, может принимать значения `left` (значение по-умолчанию), `center` и `right`


### Стили у `<table>`

* `border-spacing` - задает расстояние между границами ячеек в таблице, не работает в случае, когда для таблицы установлено свойство border-collapse со значением collapse
* `border-collapse` - устанавливает, как отображать границы вокруг ячеек таблицы, когда для ячеек установлена рамка и в месте стыка ячеек получится линия двойной толщины, может иметь значение `collapse` (убирает в таких местах двойные линии и между ячейками остается только одна граница, одновременно принадлежащая обеим ячейкам) и `separate` (вокруг каждой ячейки отображается своя собственная рамка, в местах соприкосновения ячеек показываются сразу две линии). То же правило соблюдается и для внешних границ, когда вокруг самой таблицы добавляется рамка

## Другие теги и атрибуты

### Атрибуты у `<tbody>`

* `valign` - устанавливает вертикальное выравнивание содержимого ячеек в контейнере <tbody>, может иметь значения `top`, `middle` (значение по-умолчанию), `bottom` и `baseline`. 

### Таблица

Все письмо оборачивается в тег `<table>`, которому обнуляются все возможные границы и отступы:

```html
<table
	border="0" cellpadding="0" cellspacing="0"
	style="
    	border-spacing:0;
        border-collapse:collapse;
        width:100%;
        margin:0;
        padding:0;
        vertical-align:top;
		color:black;
    	text-align:left;
        font-family:Arial,Helvetica,sans-serif;"
>
```

Так же, таблице нужно задать цвет, шрифт и выравнивание для текста. 

### Постоянный сброс стилей

Сброс стилей выполняется каждый(!) раз при использовании тега.

#### Сброс для `<table>`

```html
<table
	border="0" cellpadding="0" cellspacing="0"
	style="
    	border-spacing:0;
        border-collapse:collapse;
        width:100%;
        margin:0;
        padding:0;
        vertical-align:top;"
>
```

#### Сброс для `<td>`


```html
<td style="margin: 0; padding: 0;"></td>
```

### Структура email письма

Все письмо необходимо обернуть в основную таблицу, внутри которой содержится одна ячейка `<td>`, внутри которой уже создается таблица с содержимым письма.

```html
<table>
	<tbody>
    	<tr>
        	<td>
            	<table></table>
            <td>
        <tr>
	<tbody>
<table>      
```

### Фон
Таблице можно задавать:
```css
background-image: linear-gradient(225deg,#d4a7a8,#445cd6);
background-repeat: no-repeat;
background-size: 100% 100%;
```
В gmail градиент будет отлично работать.

### Предзаголовок

Это текст, который отображается либо рядом, либо ниже темы письма. Клиенты берут первый кусок текста из тела письма и отображают его в предзаголовке. Можно усовершенствовать предзаголовок и добавить невидимый элемент в тело письма, который пойдет в предзаголовок.

```html
<span style="
	display:none!important;
    width:0;
    height:0;
    opacity:0;
    color:transparent"
>
	откройте, это важное письмо! 
</span>
// или так
<span style="color: transparent; display: none !important; height: 0; max-height: 0; max-width: 0; opacity: 0; overflow: hidden; mso-hide: all; visibility: hidden; width: 0;">
	Текст предзаголовка
</span>
```

### Ячейки таблицы `<td>`

Внутри ячеек таблицы содержимое можно выровнять с помощью следующих стилей:

```html
<td style="
	text-align:center;
    vertical-align:middle;
    padding-top:70px;
    padding-bottom:50px;"
>
```

Внутри `<td>` можно использовать `<div>`.
Работает свойство `border-radius`.

Вертикальные отступы можно задавать вот так:

```html
<tr>
	<td></td>
    <td>Содержимое</td>
    <td></td>
</tr>
```

```html
<table style="width: 100%;">
	<tbody>
    	<tr>
        	<td>
            	<table style="width=650px; margin: 0 auto;"></table>
            </td>
        <tr>
	</tbody>
</table>
```
Горизонтальные отступы между **ВСЕМИ** элементами (например, между текстом) следует задавать через `margin-bottom: 20px;`, вместе с этим обнуляя `margin-top: 0px;` у **КАЖДОГО** элемента.

Для ячейки `<td>`, в которой содержится контент, можно задать `line-height: 24px;`, тогда все дочерние элементы унаследуют это значение и между ними будет создаваться отступ с помощью высоты строки.


### Горизонтальная полоса `<hr>`

В email письмах можно задавать горизонтальную черту, разделяющую контент. Пример стилей для такой полосы:

```html
<hr style="
	margin-bottom:22px;
    border-collapse:collapse;
    height:1px;
    border:0;
    background-color:#d8d8d8;
    color:#d8d8d8;"
>
```

### Текст

Каждый абзац с текстом помещяется в соответствующий семантический тег `<p>`.

* **жирный текст** выделяется тегом `<b>жирный текст</b>`.
* *наклонный текст* выделяется тегом `<i>наклонный текст</i>`.

### Списки

Можно использовать `html` списки с помощью тегов `<ul>` и `<ol>`, например:

```html
<ul>
	<li>
    	<p>Абзац с текстом</p>
    </li>
</ul>
```

Списки можно применять только к текстовым элементам. Если внутри элемента списка присутствует какой-то контент помимо текста (например, одно изображение), то необходимо прерывать список, вставлять это изображение через теги `<table>...`, а после начинатьновый  список с необходимой позиции с помощью атрибута `start=""` у элемента `<ol>`. Например:

```html
<p>Наши новости:</p>
<ol>
    <li>
        <p>Мы запустили что-то новое!</p>
    <li>
</ol>
<table>
    <tbody>
        <tr>
            <td style="text-align: center; vertical-align: top;">
                <img style="width="230px; max-width="100%" src="..." alt="">
            </td>
        </tr>
    </tbody>
</table>
```

### Ссылки и кнопки

Как сделать ссылку в виде кнопки.

```html
<td>
	<center style="min-width:602px;width:100%">
    	<span style="
        	text-align:center;
            vertical-align:middle;
            border-radius:3px;
            background-color:#ffbf01;
            border-bottom:#f58500 3px solid;
            display:inline-block;
            font-weight:400;"
        >
 			<a href="..." style="
            	color:#000;
                font-size:27px;
                text-decoration:none;
                line-height:50px;
                display:inline-block;
                padding:0 20px"
            >
            	Купить!
            </a>
        </span>
    </center>
</td>
```



### Изображения

Все теги `<img>` обязательно должны иметь атрибут `alt=""` (можно пустой). 

**Ниже пример** выравнивания двух изображений по центру. Изображениям задается `width: 230px;`, а их контейнерам `<div style="width=49%; min-width=230px; display: inline-block;">`. Таким образом на больших экранах изображения отображаются в одной строке, а на маленьких экранах - когда не помещаются в одной стоке с шириной 230px каждый - то стоят друг под другом.

```html
<td>
	<div style="text-align: center;">
    	<div style="width=49%; min-width=230px; display: inline-block;">
        	<img style="width="230px; max-width="100%" src="..." alt="">
            <p style="
            	text-align:center;
                font-style:italic;
                margin-top:10px;
                color:#7f7f7f;
                opacity:0.8"
            >
            	Подпись к изображению
            </p>
        </div>
        <div style="width=49%; min-width=230px; display: inline-block;">
        	<img style="width="230px; max-width="100%" src="..." alt="">
            <p style="
            	text-align:center;
                font-style:italic;
                margin-top:10px;
                color:#7f7f7f;
                opacity:0.8"
            >
            	Подпись к изображению
            </p>
        </div>
    </div>
</td>
```

### Шрифты

В почтовых рассылках допускается использование только стандартных шрифтовых наборов, которые присутствуют на всех устройствах, их использование является безопасным:

```css
font-family: Arial, Helvetica, sans-serif;
font-family: 'Arial Black', Gadget, sans-serif;
font-family: Georgia, serif;
font-family: 'MS Sans Serif', Geneva, sans-serif;
font-family: 'MS Serif', 'New York', sans-serif;
font-family: Tahoma, Geneva, sans-serif;
font-family: 'Times New Roman', Times, serif;
font-family: 'Trebuchet MS', Helvetica, sans-serif;
font-family: Verdana, Geneva, sans-serif;
```

Эти шрифты можно использовать в рассылках без страха и риска. Если все же хочется использовать совсем нестандартные шрифты через правило @font-face, то это правило работает только в IOS, Google mail и Android 4 (Gmail).



